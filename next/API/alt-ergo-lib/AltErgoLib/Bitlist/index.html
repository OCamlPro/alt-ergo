<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bitlist (alt-ergo-lib.AltErgoLib.Bitlist)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">alt-ergo-lib</a> &#x00BB; <a href="../index.html">AltErgoLib</a> &#x00BB; Bitlist</nav><header class="odoc-preamble"><h1>Module <code><span>AltErgoLib.Bitlist</span></code></h1><p>Bit-lists provide a domain on bit-vectors that represent the known bits sets to <code>1</code> and <code>0</code>, respectively.</p><p>This module provides an implementation of bitlists and related operators. The bitlists provided by this module do not have a fixed width, and can represent arbitrary-precision integers.</p></header><nav class="odoc-toc"><ul><li><a href="#prefix-and-infix-operators">Prefix and infix operators</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type of bitlists.</p><p>Bitlists are indexed from the right: the least-significant bit has index <code>0</code>.</p><p>Bitlists include an explanation (that can be recovered through the <code>explanation</code> function). The explanation indicates why the bitlist applies to a value, which must be maintained separately.</p><p>The explanation associated with the result of any bitlist operation is the union of the explanations associated with its arguments.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><a href="#type-t">t</a> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div><div class="spec-doc"><p>Pretty-printer for bitlists</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Inconsistent"><a href="#exception-Inconsistent" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Inconsistent</span> <span class="keyword">of</span> <a href="../Explanation/index.html#type-t">Explanation.t</a></span></code></div><div class="spec-doc"><p>Exception raised when an inconsistency is detected.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unknown"><a href="#val-unknown" class="anchor"></a><code><span><span class="keyword">val</span> unknown : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>unknown</code> is a bitlist that repersents all integers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-explanation"><a href="#val-explanation" class="anchor"></a><code><span><span class="keyword">val</span> explanation : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Explanation/index.html#type-t">Explanation.t</a></span></code></div><div class="spec-doc"><p>Returns the explanation associated with the bitlist. See the type-level documentation for details.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exact"><a href="#val-exact" class="anchor"></a><code><span><span class="keyword">val</span> exact : <span><span class="xref-unresolved">Z</span>.t <span class="arrow">&#45;&gt;</span></span> <span><a href="../Explanation/index.html#type-t">Explanation.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>exact v ex</code> returns a bitlist that represents the constant <code>v</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal b1 b2</code> returns <code>true</code> if the bitlists <code>b1</code> and <code>b2</code> are equal, albeit with possibly different explanations.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ones"><a href="#val-ones" class="anchor"></a><code><span><span class="keyword">val</span> ones : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>ones b</code> returns a bitlist where the zero bits in <code>b</code> are replaced with unknown bits.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-zeroes"><a href="#val-zeroes" class="anchor"></a><code><span><span class="keyword">val</span> zeroes : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>zeroes b</code> returns a bitlist where the one bits in <code>b</code> are replaced with unknown bits.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_explanation"><a href="#val-add_explanation" class="anchor"></a><code><span><span class="keyword">val</span> add_explanation : <span><span class="label">ex</span>:<a href="../Explanation/index.html#type-t">Explanation.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>add_explanation ~ex b</code> adds the explanation <code>ex</code> to the bitlist <code>b</code>. The returned bitlist has both the explanation of <code>b</code> and <code>ex</code> as explanation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unknown_bits"><a href="#val-unknown_bits" class="anchor"></a><code><span><span class="keyword">val</span> unknown_bits : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Z</span>.t</span></code></div><div class="spec-doc"><p><code>unknown_bits b</code> returns the set of unknown (or undetermined) bits in <code>b</code>.</p><p>The value of <code>Z.logand (Z.lognot (unknown_bits b)) n</code> is the same for any <code>n</code> in the set represented by the bitlist <code>b</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_fully_known"><a href="#val-is_fully_known" class="anchor"></a><code><span><span class="keyword">val</span> is_fully_known : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_fully_known b</code> determines if there are unknown bits in <code>b</code> or not. <code>is_fully_known b</code> is <code>true</code> iff <code>unknown_bits b</code> is <code>Z.zero</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-value"><a href="#val-value" class="anchor"></a><code><span><span class="keyword">val</span> value : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Z</span>.t</span></code></div><div class="spec-doc"><p><code>value b</code> returns the value associated with the bitlist <code>b</code>. If the bitlist <code>b</code> is not fully known, then only the known bits (those that are set in <code>bits_known b</code>) are meaningful; unknown bits are set to <code>0</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-intersect"><a href="#val-intersect" class="anchor"></a><code><span><span class="keyword">val</span> intersect : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>intersect b1 b2</code> returns a new bitlist <code>b</code> that subsumes both <code>b1</code> and <code>b2</code>. Any explanation justifying that <code>b1</code> and <code>b2</code> apply to the same value must have been added to <code>b1</code> and <code>b2</code>.</p><p>Raises <code>Inconsistent</code> if <code>b1</code> and <code>b2</code> are not compatible (i.e. there are bits set in one bitlist and cleared in the other).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lognot"><a href="#val-lognot" class="anchor"></a><code><span><span class="keyword">val</span> lognot : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>lognot b</code> swaps the bits that are set and cleared.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-logand"><a href="#val-logand" class="anchor"></a><code><span><span class="keyword">val</span> logand : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bit-wise and.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-logor"><a href="#val-logor" class="anchor"></a><code><span><span class="keyword">val</span> logor : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bit-wise or.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-logxor"><a href="#val-logxor" class="anchor"></a><code><span><span class="keyword">val</span> logxor : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bit-wise xor.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Addition.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span><span class="keyword">val</span> sub : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Subtraction.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mul"><a href="#val-mul" class="anchor"></a><code><span><span class="keyword">val</span> mul : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Integer multiplication.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bvshl"><a href="#val-bvshl" class="anchor"></a><code><span><span class="keyword">val</span> bvshl : <span><span class="label">size</span>:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Logical left shift, truncated to the <code>size</code> least significant bits.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bvlshr"><a href="#val-bvlshr" class="anchor"></a><code><span><span class="keyword">val</span> bvlshr : <span><span class="label">size</span>:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Logical right shift, truncated to the <code>size</code> least significant bits.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-shift_left"><a href="#val-shift_left" class="anchor"></a><code><span><span class="keyword">val</span> shift_left : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Shifts to the left. Equivalent to a multiplication by a power of <code>2</code>. The second argument must be nonnegative.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-shift_right"><a href="#val-shift_right" class="anchor"></a><code><span><span class="keyword">val</span> shift_right : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Shifts to the right. This is an arithmetic shift, equivalent to a division by a power of <code>2</code> with rounding towards -oo. The second argument must be nonnegative.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract"><a href="#val-extract" class="anchor"></a><code><span><span class="keyword">val</span> extract : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>extract b off len</code> returns a nonnegative bitlist corresponding to bits <code>off</code> to <code>off + len - 1</code> of <code>b</code>.</p><p><b>Note</b>: This uses the same arguments as <code>Z.extract</code>, not the arguments from the SMT-LIB's <code>extract</code> primitive.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-increase_lower_bound"><a href="#val-increase_lower_bound" class="anchor"></a><code><span><span class="keyword">val</span> increase_lower_bound : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Z</span>.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Z</span>.t</span></code></div><div class="spec-doc"><p><code>increase_lower_bound b lb</code> returns the smallest integer <code>lb' &gt;= lb</code> that matches the bit-pattern in <code>b</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Not_found</code> <p>if no such integer exists.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decrease_upper_bound"><a href="#val-decrease_upper_bound" class="anchor"></a><code><span><span class="keyword">val</span> decrease_upper_bound : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Z</span>.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Z</span>.t</span></code></div><div class="spec-doc"><p><code>decrease_upper_bound b ub</code> returns the largest integer <code>ub' &gt;= ub</code> that matches the bit-pattern in <code>b</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Not_found</code> <p>if no such integer exists.</p></li></ul></div></div><h3 id="prefix-and-infix-operators"><a href="#prefix-and-infix-operators" class="anchor"></a>Prefix and infix operators</h3><div class="odoc-spec"><div class="spec value anchored" id="val-(land)"><a href="#val-(land)" class="anchor"></a><code><span><span class="keyword">val</span> (land) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bit-wise logical and <code>logand</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(lor)"><a href="#val-(lor)" class="anchor"></a><code><span><span class="keyword">val</span> (lor) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bit-wise logical inclusive or <code>logor</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(lxor)"><a href="#val-(lxor)" class="anchor"></a><code><span><span class="keyword">val</span> (lxor) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bit-wise logical exclusive xor <code>logxor</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(~!)"><a href="#val-(~!)" class="anchor"></a><code><span><span class="keyword">val</span> (~!) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bit-wise logical negation <code>lognot</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(lsl)"><a href="#val-(lsl)" class="anchor"></a><code><span><span class="keyword">val</span> (lsl) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bit-wise shift to the left <code>shift_left</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(asr)"><a href="#val-(asr)" class="anchor"></a><code><span><span class="keyword">val</span> (asr) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bit-wise shift to the right <code>shift_right</code>.</p></div></div></div></body></html>
